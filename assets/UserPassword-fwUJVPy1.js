import{_ as S}from"./PageContainer-Cs4r5WfD.js";import{r as m,u as V,c as k,d as o,a as y,b as U,e as l,i as _,c0 as x,E as R}from"./index-CWzDDoqp.js";import{a as C,E as F}from"./el-col-DpQOQ9iO.js";import{E as N,a as q}from"./el-form-item-DdSBbT10.js";import{E as B}from"./_plugin-vue_export-helper-CPSEkvkw.js";import{E as $}from"./el-input-BaIcVOUt.js";import"./el-message-B3q5BU4e.js";const H={__name:"UserPassword",setup(I){const r=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,t)=>{e===r.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,t)=>{e!==r.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},n=m(),w=y(),d=V(),c=async()=>{await n.value.validate()&&(await x(r.value),R({type:"success",message:"更换密码成功"}),d.setToken(""),d.setUser({}),w.push("/login"))},f=()=>{n.value.resetFields()};return(u,e)=>{const t=$,s=q,p=B,g=N,v=F,E=C,b=S;return U(),k(b,{title:"重置密码"},{default:o(()=>[l(E,null,{default:o(()=>[l(v,{span:12},{default:o(()=>[l(g,{model:r.value,rules:i,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:o(()=>[l(s,{label:"原密码",prop:"old_pwd"},{default:o(()=>[l(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{label:"新密码",prop:"new_pwd"},{default:o(()=>[l(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{label:"确认新密码",prop:"re_pwd"},{default:o(()=>[l(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,null,{default:o(()=>[l(p,{onClick:c,type:"primary"},{default:o(()=>[...e[3]||(e[3]=[_("修改密码",-1)])]),_:1}),l(p,{onClick:f},{default:o(()=>[...e[4]||(e[4]=[_("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
